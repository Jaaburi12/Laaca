<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Ethiopian Services Hub — All-in-One (Auth + User + Admin)</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

        }

        

        :root {

            --primary: #2d5b7c;

            --secondary: #e74c3c;

            --accent: #27ae60;

            --light: #f5f7fb;

            --dark: #2c3e50;

            --text: #333;

            --card-bg: #fff;

            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

        }

        

        body {

            background: linear-gradient(135deg, #f5f7fb 0%, #e8ecf1 100%);

            color: var(--text);

            line-height: 1.6;

            min-height: 100vh;

            padding-bottom: 40px;

        }

        

        .container {

            max-width: 1100px;

            margin: 0 auto;

            padding: 0 20px;

        }

        

        header {

            background: linear-gradient(to right, var(--primary), #3a7bab);

            color: white;

            padding: 14px 0;

            box-shadow: var(--shadow);

            position: sticky;

            top: 0;

            z-index: 100;

        }

        

        .header-content {

            display: flex;

            justify-content: space-between;

            align-items: center;

            gap: 14px;

        }

        

        .logo {

            display: flex;

            align-items: center;

            gap: 12px;

        }

        

        .logo-icon {

            font-size: 28px;

            background: white;

            color: var(--primary);

            width: 44px;

            height: 44px;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

        }

        

        .logo-text h1 {

            font-size: 20px;

            font-weight: 700;

            line-height: 1.1;

        }

        

        .logo-text p {

            font-size: 12px;

            opacity: 0.9;

        }



        .top-actions {

            display: flex;

            align-items: center;

            gap: 10px;

        }



        .nav-tabs {

            display: flex;

            gap: 8px;

            background: rgba(255,255,255,0.15);

            padding: 6px;

            border-radius: 10px;

        }

        .nav-tab {

            background: transparent;

            border: 0;

            color: white;

            padding: 8px 12px;

            border-radius: 8px;

            cursor: pointer;

            font-weight: 600;

            transition: background .2s ease;

        }

        .nav-tab.active, .nav-tab:hover {

            background: rgba(0,0,0,0.12);

        }



        .user-menu {

            position: relative;

        }

        .avatar {

            background: white;

            color: var(--primary);

            width: 36px;

            height: 36px;

            border-radius: 50%;

            display: grid;

            place-items: center;

            font-weight: 800;

            cursor: pointer;

        }

        .dropdown {

            position: absolute;

            right: 0;

            top: 46px;

            width: 220px;

            background: white;

            border-radius: 10px;

            box-shadow: var(--shadow);

            padding: 10px;

            display: none;

        }

        .dropdown.show { display: block; }

        .dropdown .row {

            display: flex;

            align-items: center;

            gap: 10px;

            padding: 8px;

            border-radius: 8px;

        }

        .dropdown .row:not(:last-child) { border-bottom: 1px solid #eee; }

        .dropdown .row small { color: #666; }

        .dropdown .logout {

            display: inline-block;

            margin-top: 8px;

            background: var(--secondary);

            color: white;

            padding: 8px 10px;

            border-radius: 8px;

            text-align: center;

            cursor: pointer;

            width: 100%;

            font-weight: 700;

        }



        .hero {

            text-align: center;

            padding: 36px 0 28px 0;

            background: linear-gradient(rgba(45, 91, 124, 0.9), rgba(45, 91, 124, 0.8)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect fill="%232d5b7c" width="100" height="100"/><path fill="%233a7bab" d="M0 0L100 100M100 0L0 100" stroke-width="0.5"/></svg>');

            background-size: cover;

            color: white;

            margin-bottom: 20px;

            border-radius: 0 0 15px 15px;

        }

        

        .hero h2 {

            font-size: 30px;

            margin-bottom: 10px;

        }

        

        .hero p {

            font-size: 16px;

            max-width: 740px;

            margin: 0 auto;

        }

        

        .wizard-container {

            background: white;

            border-radius: 12px;

            overflow: hidden;

            box-shadow: var(--shadow);

            margin: 20px 0;

        }

        

        .wizard-header {

            display: flex;

            background: #f0f4f8;

            border-bottom: 2px solid #ddd;

            position: relative;

        }

        

        .wizard-step {

            padding: 14px 20px;

            text-align: center;

            flex: 1;

            cursor: pointer;

            position: relative;

            transition: all 0.3s;

            font-weight: 600;

            color: #666;

        }

        

        .wizard-step.active {

            color: var(--primary);

            background: white;

        }

        

        .wizard-step::after {

            content: "";

            position: absolute;

            right: -15px;

            top: 0;

            width: 30px;

            height: 100%;

            background: inherit;

            transform: skewX(20deg);

            z-index: 1;

        }

        

        .wizard-step:last-child::after { display: none; }

        

        .wizard-content {

            padding: 24px;

            min-height: 420px;

        }

        

        .wizard-pane { display: none; }

        .wizard-pane.active { display: block; animation: fadeIn 0.4s ease; }

        

        @keyframes fadeIn {

            from { opacity: 0; transform: translateY(10px); }

            to { opacity: 1; transform: translateY(0); }

        }

        

        .service-grid {

            display: grid;

            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));

            gap: 16px;

            margin-top: 12px;

        }

        

        .service-item {

            background: var(--light);

            border-radius: 10px;

            padding: 18px;

            text-align: center;

            cursor: pointer;

            transition: all 0.3s;

            border: 2px solid transparent;

        }

        

        .service-item:hover {

            transform: translateY(-4px);

            border-color: var(--primary);

            box-shadow: var(--shadow);

        }

        

        .service-item.active {

            border-color: var(--accent);

            background: rgba(39, 174, 96, 0.1);

        }



        .service-icon {

            font-size: 40px;

            color: var(--primary);

            margin-bottom: 12px;

        }

        

        .service-item h3 { margin-bottom: 8px; color: var(--primary); }

        .service-item p { color: #666; font-size: 14px; }

        

        .form-group { margin-bottom: 16px; }

        .form-group label {

            display: block; margin-bottom: 6px; font-weight: 600; color: #444;

        }

        .form-group input, .form-group select {

            width: 100%; padding: 11px 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 15px;

        }

        .form-group input:focus, .form-group select:focus {

            outline: none; border-color: var(--primary);

            box-shadow: 0 0 0 2px rgba(45, 91, 124, 0.2);

        }

        

        .wizard-navigation {

            display: flex;

            justify-content: space-between;

            margin-top: 22px;

            padding-top: 16px;

            border-top: 1px solid #eee;

        }

        

        .btn {

            display: inline-block;

            background: var(--primary);

            color: white;

            padding: 11px 20px;

            border-radius: 6px;

            text-decoration: none;

            font-weight: 700;

            transition: background 0.25s;

            border: none;

            cursor: pointer;

            text-align: center;

        }

        .btn:hover { background: #3a7bab; }

        .btn-secondary { background: var(--secondary); }

        .btn-secondary:hover { background: #c0392b; }

        .btn-accent { background: var(--accent); }

        .btn-accent:hover { background: #219653; }

        .btn-outline {

            background: transparent; border: 2px solid var(--primary); color: var(--primary);

        }

        .btn-outline:hover { background: var(--primary); color: white; }

        .btn-ghost {

            background: transparent; color: white; border: 0; padding: 8px 10px; cursor: pointer; font-weight: 700;

        }

        .btn-white {

            background: white; color: var(--primary);

        }



        .summary-item {

            display: flex; justify-content: space-between; padding: 12px; border-bottom: 1px solid #eee;

        }

        .summary-item:last-child { border-bottom: none; }

        .summary-title { font-weight: 600; color: #555; }

        

        .payment-options {

            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;

        }

        .payment-option {

            border: 2px solid #ddd; border-radius: 8px; padding: 18px; text-align: center; cursor: pointer; transition: all 0.3s;

        }

        .payment-option:hover { border-color: var(--primary); }

        .payment-option.selected { border-color: var(--accent); background: rgba(39, 174, 96, 0.1); }

        .payment-icon { font-size: 28px; margin-bottom: 8px; color: #555; }

        

        footer {

            text-align: center; margin-top: 36px; padding: 20px; color: #666; border-top: 1px solid #ddd;

        }

        

        .notification {

            position: fixed; top: 20px; right: 20px; padding: 14px 16px; background: var(--accent); color: white; border-radius: 8px; box-shadow: var(--shadow); transform: translateX(100%); transition: transform 0.3s ease; z-index: 1000;

        }

        .notification.error { background: var(--secondary); }

        .notification.show { transform: translateX(0); }



        /* Auth buttons */

        .auth-buttons { display: flex; gap: 8px; }

        .auth-buttons .btn { padding: 8px 12px; }

        

        /* Modals */

        .modal-backdrop {

            position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; place-items: center; z-index: 1200;

        }

        .modal-backdrop.show { display: grid; }

        .modal {

            width: 100%; max-width: 520px; background: white; border-radius: 12px; box-shadow: var(--shadow); overflow: hidden;

        }

        .modal header {

            background: var(--primary); color: white; padding: 12px 16px; position: relative;

        }

        .modal header h3 { font-size: 18px; }

        .modal header .close {

            position: absolute; right: 12px; top: 10px; background: transparent; border: 0; color: white; font-size: 20px; cursor: pointer;

        }

        .modal .body { padding: 16px; }

        .modal .footer { padding: 12px 16px; display: flex; justify-content: flex-end; gap: 8px; border-top: 1px solid #eee; }

        .muted { color: #666; font-size: 13px; }



        /* Admin Panel */

        .panel { display: none; }

        .panel.active { display: block; }

        .panel-card {

            background: white; border-radius: 12px; padding: 16px; box-shadow: var(--shadow); margin: 10px 0;

        }

        .panel h2 { color: var(--primary); margin-bottom: 6px; }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

        .table {

            width: 100%; border-collapse: collapse; font-size: 14px;

        }

        .table th, .table td {

            text-align: left; border-bottom: 1px solid #eee; padding: 8px;

        }

        .badge {

            display: inline-block; padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 800; background: #eef2f7; color: var(--primary);

        }



        /* My Bookings */

        .my-bookings {

            margin-top: 18px;

            background: white;

            border-radius: 12px;

            box-shadow: var(--shadow);

            padding: 16px;

        }

        .empty {

            padding: 10px;

            background: var(--light);

            border-radius: 8px;

            color: #666;

            text-align: center;

        }



        @media (max-width: 900px) {

            .grid-2 { grid-template-columns: 1fr; }

        }



        @media (max-width: 768px) {

            .wizard-header { flex-direction: column; }

            .wizard-step::after { display: none; }

            .service-grid { grid-template-columns: 1fr; }

            .payment-options { grid-template-columns: 1fr; }

            .nav-tabs { display: none; } /* hide secondary nav on small screens */

        }

    </style>

</head>

<body>

    <header>

        <div class="container header-content">

            <div class="logo">

                <div class="logo-icon"><i class="fas fa-globe-africa"></i></div>

                <div class="logo-text">

                    <h1>Ethiopian Services Hub</h1>

                    <p>Travel, Health & Stores — one place</p>

                </div>

            </div>



            <div class="top-actions">

                <div class="nav-tabs">

                    <button class="nav-tab active" data-target="userArea"><i class="fa-solid fa-house"></i> Services</button>

                    <button class="nav-tab" data-target="adminArea" id="adminTab" style="display:none"><i class="fa-solid fa-shield-halved"></i> Admin</button>

                </div>

                <div class="auth-buttons" id="authButtons">

                    <button class="btn btn-white" id="openLogin"><i class="fa-solid fa-right-to-bracket"></i> Login</button>

                    <button class="btn btn-accent" id="openRegister"><i class="fa-solid fa-user-plus"></i> Register</button>

                </div>

                <div class="user-menu" id="userMenu" style="display:none">

                    <div class="avatar" id="avatar">U</div>

                    <div class="dropdown" id="userDropdown">

                        <div class="row">

                            <i class="fa-regular fa-user"></i>

                            <div>

                                <div id="dropdownName" style="font-weight:800"></div>

                                <small id="dropdownRole"></small>

                            </div>

                        </div>

                        <div class="row">

                            <i class="fa-regular fa-envelope"></i>

                            <small id="dropdownEmail"></small>

                        </div>

                        <div class="row">

                            <i class="fa-regular fa-calendar-check"></i>

                            <small id="dropdownStats">0 bookings</small>

                        </div>

                        <div class="logout" id="logoutBtn"><i class="fa-solid fa-arrow-right-from-bracket"></i> Logout</div>

                    </div>

                </div>

            </div>

        </div>

    </header>



    <div class="hero">

        <div class="container">

            <h2>Ku soo dhawoow — Ethiopian Services Hub</h2>

            <p>Hal meel ku maaree ballamaha isbitaalka, dukaamada iyo duulimaadyada. Gasho (login) ama is diiwaangeli si aad u dalbato.</p>

        </div>

    </div>



    <div class="container">



        <!-- USER AREA (Wizard + My Bookings) -->

        <section id="userArea" class="panel active">

            <div class="wizard-container">

                <div class="wizard-header">

                    <div class="wizard-step active" data-step="services"><i class="fas fa-th-large"></i> Services</div>

                    <div class="wizard-step" data-step="selection"><i class="fas fa-check-circle"></i> Selection</div>

                    <div class="wizard-step" data-step="details"><i class="fas fa-user"></i> Details</div>

                    <div class="wizard-step" data-step="payment"><i class="fas fa-credit-card"></i> Payment</div>

                    <div class="wizard-step" data-step="confirmation"><i class="fas fa-check"></i> Confirmation</div>

                </div>

                

                <div class="wizard-content">

                    <!-- Services Pane -->

                    <div class="wizard-pane active" id="services-pane">

                        <h2>Dooro Adeeg</h2>

                        <p>Ka xulo adeegyada hoose</p>

                        

                        <div class="service-grid">

                            <div class="service-item" data-service="hospital">

                                <div class="service-icon"><i class="fas fa-hospital"></i></div>

                                <h3>Hospitals</h3>

                                <p>Samee ballan isbitaal</p>

                            </div>

                            <div class="service-item" data-service="store">

                                <div class="service-icon"><i class="fas fa-shopping-cart"></i></div>

                                <h3>Stores</h3>

                                <p>Ka dukaameyso suuqyada</p>

                            </div>

                            <div class="service-item" data-service="flights">

                                <div class="service-icon"><i class="fas fa-plane"></i></div>

                                <h3>Flights</h3>

                                <p>Ka dalbo duulimaad gudaha</p>

                            </div>

                        </div>

                        

                        <div class="wizard-navigation">

                            <div class="muted"><i class="fa-regular fa-circle-question"></i> Waxaa loo baahan yahay login si loo sii wado</div>

                            <button class="btn btn-outline" id="next-to-selection" disabled>Next <i class="fas fa-arrow-right"></i></button>

                        </div>

                    </div>

                    

                    <!-- Selection Pane -->

                    <div class="wizard-pane" id="selection-pane">

                        <h2>Xulo Faahfaahinta</h2>

                        <p id="selection-description">Xulo ikhtiyaarrada adeegga</p>

                        

                        <div id="hospital-selection" class="service-selection">

                            <div class="form-group">

                                <label for="hospital">Select Hospital</label>
                      <select id="hospital">
                                    <option value="">-- Select Hospital --</option>
                                    <option value="black-lion">Black Lion Hospital - Addis Ababa</option>
                                    <option value="st-paul">St. Paul's Hospital - Addis Ababa</option>
                                    <option value="tikur-anbessa">Tikur Anbessa Hospital - Addis Ababa</option>
                                    <option value="jimma">Jimma University Medical Center - Jimma</option>
                                    <option value="ayder">Ayder Referral Hospital - Mekelle</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="department">Department</label>
                                <select id="department">
                                    <option value="">-- Select Department --</option>
                                    <option value="general">General Medicine</option>
                                    <option value="cardiology">Cardiology</option>
                                    <option value="pediatrics">Pediatrics</option>
                                    <option value="orthopedics">Orthopedics</option>
                                    <option value="dentistry">Dentistry</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="doctor">Doctor</label>
                                <select id="doctor">
                                    <option value="">-- Select Doctor --</option>
                                    <option value="dr1">Dr. Ahmed Mohammed</option>
                                    <option value="dr2">Dr. Selamawit Bekele</option>
                                    <option value="dr3">Dr. Tesfaye Girma</option>
                                    <option value="dr4">Dr. Fatuma Hussein</option>
                                </select>
                            </div>
                          </div>
                        
                        <div id="store-selection" class="service-selection">
                            <div class="form-group">
                                <label for="store">Select Store</label>
                                <select id="store">
                                    <option value="">-- Select Store --</option>
                                    <option value="souq">Souq Ethiopia - Addis Ababa</option>
                                    <option value="shoa">Shoa Supermarket - Addis Ababa</option>
                                    <option value="addis">Addis Mercato - Addis Ababa</option>
                                    <option value="dire">Dire Dawa Market - Dire Dawa</option>
                                    <option value="hawassa">Hawassa Market - Hawassa</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="product-category">Product Category</label>
                                <select id="product-category">
                                    <option value="">-- Select Category --</option>
                                    <option value="food">Food Items</option>
                                    <option value="clothing">Clothing</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="home">Home Appliances</option>
                                    <option value="health">Health Products</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="product">Product Name</label>
                                <input type="text" id="product" placeholder="Enter product name">
                            </div>
                        </div>
                        
                        <div id="flights-selection" class="service-selection">
                            <div class="form-group">
                                <label for="from">From</label>
                                <select id="from">
                                    <option value="">-- Select City --</option>
                                    <option value="addis">Addis Ababa (ADD)</option>
                                    <option value="dire">Dire Dawa (DIR)</option>
                                    <option value="mekelle">Mekelle (MQX)</option>
                                    <option value="bahirdar">Bahir Dar (BJR)</option>
                                    <option value="jimma">Jimma (JIM)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="to">To</label>
                                <select id="to">
                                    <option value="">-- Select City --</option>
                                    <option value="addis">Addis Ababa (ADD)</option>
                                    <option value="dire">Dire Dawa (DIR)</option>
                                    <option value="mekelle">Mekelle (MQX)</option>
                                    <option value="bahirdar">Bahir Dar (BJR)</option>
                                    <option value="jimma">Jimma (JIM)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="passengers">Number of Passengers</label>
                                <select id="passengers">
                                    <option value="1">1 Passenger</option>
                                    <option value="2">2 Passengers</option>
                                    <option value="3">3 Passengers</option>
                                    <option value="4">4 Passengers</option>
                                    <option value="5">5+ Passengers</option>
                                </select>
                            </div>
                          </div>
                        
                        <div class="wizard-navigation">
                            <button class="btn btn-outline" id="back-to-services"><i class="fas fa-arrow-left"></i> Back</button>
                            <button class="btn" id="next-to-details">Next <i class="fas fa-arrow-right"></i></button>
                        </div>
                    </div>
                    
                    <!-- Details Pane -->
                    <div class="wizard-pane" id="details-pane">
                        <h2>Xogtaada</h2>
                        <p>Geli macluumaadkaaga</p>
                        
                        <div class="form-group">
                            <label for="fullname">Full Name</label>
                            <input type="text" id="fullname" placeholder="Enter your full name">
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" placeholder="Enter your phone number">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter your address">
                        </div>
                        
                        <div class="wizard-navigation">
                            <button class="btn btn-outline" id="back-to-selection"><i class="fas fa-arrow-left"></i> Back</button>
                            <button class="btn" id="next-to-payment">Next <i class="fas fa-arrow-right"></i></button>
                        </div>
                      </div>
                    
                    <!-- Payment Pane -->
                    <div class="wizard-pane" id="payment-pane">
                        <h2>Payment</h2>
                        <p>Select your payment method</p>
                        
                        <div class="payment-options">
                            <div class="payment-option" data-method="credit-card">
                                <div class="payment-icon"><i class="fas fa-credit-card"></i></div>
                                <h3>Credit Card</h3>
                                <p>Pay with Visa, Mastercard, or American Express</p>
                            </div>
                            <div class="payment-option" data-method="paypal">
                                <div class="payment-icon"><i class="fab fa-paypal"></i></div>
                                <h3>PayPal</h3>
                                <p>Pay with your PayPal account</p>
                            </div>
                            <div class="payment-option" data-method="bank-transfer">
                                <div class="payment-icon"><i class="fas fa-university"></i></div>
                                <h3>Bank Transfer</h3>
                                <p>Transfer directly from your bank</p>
                            </div>
                        </div>
                        
                        <div id="credit-card-form" class="payment-form" style="display:none;">
                            <div class="form-group">
                                <label for="card-number">Card Number</label>
                                <input type="text" id="card-number" placeholder="Enter card number">
                            </div>
                            <div class="form-group">
                                <label for="card-name">Name on Card</label>
                                <input type="text" id="card-name" placeholder="Enter name on card">
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                <div class="form-group">
                                    <label for="expiry">Expiry Date</label>
                                    <input type="text" id="expiry" placeholder="MM/YY">
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV</label>
                                    <input type="text" id="cvv" placeholder="CVV">
                                </div>
                            </div>
                        </div>
                        
                        <div class="wizard-navigation">
                            <button class="btn btn-outline" id="back-to-details"><i class="fas fa-arrow-left"></i> Back</button>
                            <button class="btn" id="next-to-confirmation">Pay Now</button>
                        </div>
                    </div>
                    
                    <!-- Confirmation Pane -->
                  <div class="wizard-pane" id="confirmation-pane">
                        <div style="text-align: center; padding: 24px 0;">
                            <div style="font-size: 70px; color: var(--accent); margin-bottom: 14px;"><i class="fas fa-check-circle"></i></div>
                            <h2>Booking Confirmed!</h2>
                            <p>Thanks for your booking. Reference: <strong id="refNo">ETH-XXXX-YYYY</strong></p>
                            
                            <div style="max-width: 560px; margin: 22px auto; background: var(--light); border-radius: 10px; padding: 16px;">
                                <h3 style="margin-bottom: 10px; color: var(--primary);">Booking Summary</h3>
                                <div class="summary-item"><span class="summary-title">Service:</span><span id="summary-service">Hospital Appointment</span></div>
                                <div class="summary-item"><span class="summary-title">Details:</span><span id="summary-details">Black Lion Hospital - General Medicine</span></div>
                                <div class="summary-item"><span class="summary-title">Date & Time:</span><span id="summary-datetime">—</span></div>
                                <div class="summary-item"><span class="summary-title">Customer:</span><span id="summary-customer">—</span></div>
                                <div class="summary-item"><span class="summary-title">Total Amount:</span><span id="summary-amount" style="font-weight: 700; color: var(--accent);">$120.00</span></div>
                            </div>
                            
                            <div style="display:flex; gap:10px; justify-content:center;">
                                <button class="btn btn-outline" id="back-to-payment"><i class="fas fa-arrow-left"></i> Back</button>
                                <button class="btn btn-accent" id="finish-booking"><i class="fas fa-home"></i> Back to Home</button>
                                <button class="btn" id="viewMyBookings"><i class="fa-regular fa-calendar-check"></i> My Bookings</button>
                            </div>
                          </div>
                    </div>
                </div>
            </div>

            <div class="my-bookings" id="myBookings">
                <h3 style="color:var(--primary); margin-bottom:8px;"><i class="fa-regular fa-calendar-check"></i> My Bookings</h3>
                <div id="myBookingsList" class="empty">No bookings yet. Waxaad dalban kartaa adeeg adigoo isticmaalaya wizard-ka kore.</div>
            </div>
        </section>

        <!-- ADMIN AREA -->
        <section id="adminArea" class="panel">
            <div class="panel-card">
                <h2><i class="fa-solid fa-shield-halved"></i> Admin Panel</h2>
                <p class="muted">Kani waa aragtida maamulka (admins kaliya).</p>
            </div>
            <div class="grid-2">
                <div class="panel-card">
                    <h3>Users</h3>
                    <table class="table" id="usersTable">
                        <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Joined</th></tr></thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="panel-card">
                    <h3>Orders / Bookings</h3>
                    <table class="table" id="ordersTable">
                        <thead><tr><th>Ref</th><th>User</th><th>Service</th><th>Details</th><th>Amount</th><th>Date</th></tr></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>
      </div>

    <footer>
        <div class="container">
            <p>© <span id="year"></span> Ethiopian Services Hub. All Rights Reserved.</p>
            <p>WhatsApp: +251 912 345 678 | Email: info@ethiopianservices.com</p>
        </div>
    </footer>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i> <span id="notification-text">Operation completed successfully!</span>
    </div>

    <!-- AUTH MODALS -->
    <div class="modal-backdrop" id="loginModal">
        <div class="modal">
            <header>
                <h3><i class="fa-solid fa-right-to-bracket"></i> Login</h3>
                <button class="close" data-close="#loginModal">&times;</button>
            </header>
            <div class="body">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="you@example.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="••••••••">
                </div>
                <div class="muted"><i class="fa-solid fa-circle-info"></i> Demo: waxaad isticmaali kartaa email & password ka diiwaangelinta.</div>
            </div>
            <div class="footer">
                <button class="btn btn-outline" data-close="#loginModal">Cancel</button>
                <button class="btn btn-accent" id="doLogin">Login</button>
            </div>
           </div>
    </div>

    <div class="modal-backdrop" id="registerModal">
        <div class="modal">
            <header>
                <h3><i class="fa-solid fa-user-plus"></i> Register</h3>
                <button class="close" data-close="#registerModal">&times;</button>
            </header>
            <div class="body">
                <div class="form-group">
                    <label for="regName">Full Name</label>
                    <input type="text" id="regName" placeholder="Full name">
                </div>
                <div class="form-group">
                    <label for="regEmail">Email</label>
                    <input type="email" id="regEmail" placeholder="you@example.com">
                </div>
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="regRole">Role</label>
                    <select id="regRole">
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="muted"><i class="fa-solid fa-triangle-exclamation"></i> Passwords are stored locally in plain text for demo only (DO NOT USE REAL PASSWORDS).</div>
            </div>
            <div class="footer">
                <button class="btn btn-outline" data-close="#registerModal">Cancel</button>
                <button class="btn btn-accent" id="doRegister">Create Account</button>
            </div>
        </div>
       </div>

    <script>
        // ===== Utilities =====
        const $ = (sel, root=document) => root.querySelector(sel);
        const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

        const notify = (msg, isError=false) => {
            const n = $('#notification');
            $('#notification-text').textContent = msg;
            n.classList.toggle('error', !!isError);
            n.classList.add('show');
            setTimeout(()=> n.classList.remove('show'), 2800);
        };

        const storage = {
            get(key, fallback) { try { return JSON.parse(localStorage.getItem(key)) ?? fallback; } catch(e){ return fallback; } },
            set(key, val) { localStorage.setItem(key, JSON.stringify(val)); },
            remove(key){ localStorage.removeItem(key); }
        };
      const nowISO = () => new Date().toISOString();
        const randomRef = () => `ETH-${Math.random().toString(36).substring(2,6).toUpperCase()}-${Date.now().toString().slice(-4)}`;

        // ===== Mock API (replace with real endpoints later) =====
        const api = {
            async register({name, email, password, role='user'}){
                // Placeholder for real: await fetch('/api/register', {method:'POST', body: JSON.stringify(...)})
                const users = storage.get('users', []);
                if(users.some(u => u.email.toLowerCase() === email.toLowerCase())){
                    throw new Error('Email already registered.');
                }
                const user = { id: crypto.randomUUID?.() || String(Date.now()), name, email, password, role, joinedAt: nowISO(), bookings: 0 };
                users.push(user);
                storage.set('users', users);
                return user;
            },
            async login({email, password}){
                // Placeholder for real: await fetch('/api/login', {method:'POST', body: JSON.stringify(...)})
                const users = storage.get('users', []);
                const user = users.find(u => u.email.toLowerCase() === email.toLowerCase() && u.password === password);
                if(!user) throw new Error('Invalid email or password');
                storage.set('session', { userId: user.id, at: nowISO() });
                return user;
            },
            async me(){
                const session = storage.get('session', null);
                if(!session) return null;
                const users = storage.get('users', []);
                return users.find(u => u.id === session.userId) || null;
            },
            async logout(){
                storage.remove('session');
                return true;
            },
            async saveOrder(order){
                const orders = storage.get('orders', []);
                orders.push(order);
              storage.set('orders', orders);
                // increment user stat
                const users = storage.get('users', []);
                const idx = users.findIndex(u => u.id === order.userId);
                if(idx !== -1){ users[idx].bookings = (users[idx].bookings||0) + 1; storage.set('users', users); }
                return order;
            },
            async listOrders(){ return storage.get('orders', []); },
            async listUsers(){ return storage.get('users', []); },
        };

        // ===== Auth / UI state =====
        const authButtons = $('#authButtons');
        const userMenu = $('#userMenu');
        const avatar = $('#avatar');
        const dropdown = $('#userDropdown');
        const adminTab = $('#adminTab');

        const refreshHeader = async () => {
            const user = await api.me();
            if(user){
                authButtons.style.display = 'none';
                userMenu.style.display = 'block';
                avatar.textContent = (user.name?.[0] || 'U').toUpperCase();
                $('#dropdownName').textContent = user.name || 'User';
                $('#dropdownRole').textContent = user.role === 'admin' ? 'Admin' : 'User';
                $('#dropdownEmail').textContent = user.email || '';
                $('#dropdownStats').textContent = `${user.bookings||0} bookings`;
                adminTab.style.display = user.role === 'admin' ? 'inline-block' : 'none';
            }else{
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
                adminTab.style.display = 'none';
            }
        };

        // Dropdown toggle
      avatar?.addEventListener('click', () => dropdown.classList.toggle('show'));
        document.addEventListener('click', (e) => {
            if(!userMenu.contains(e.target)) dropdown.classList.remove('show');
        });

        // ===== Panels (User / Admin) =====
        $$('.nav-tab').forEach(btn => {
            btn.addEventListener('click', () => {
                $$('.nav-tab').forEach(b=>b.classList.remove('active'));
                btn.classList.add('active');
                const target = btn.getAttribute('data-target');
                $$('.panel').forEach(p => p.classList.remove('active'));
                $('#' + target).classList.add('active');
            });
        });

        // ===== Modals =====
        const openModal = (id) => $(id).classList.add('show');
        const closeModal = (id) =>  $(id).classList.remove('show');
        $('#openLogin').addEventListener('click', ()=> openModal('#loginModal'));
        $('#openRegister').addEventListener('click', ()=> openModal('#registerModal'));
        $$('[data-close]').forEach(btn => btn.addEventListener('click', ()=> closeModal(btn.getAttribute('data-close'))));

        // ===== Auth actions =====
        $('#doRegister').addEventListener('click', async ()=>{
            const name = $('#regName').value.trim();
            const email = $('#regEmail').value.trim();
            const password = $('#regPassword').value;
            const role = $('#regRole').value;
            if(!name || !email || !password) { notify('Please fill all fields', true); return; }
            try{
                await api.register({name, email, password, role});
                notify('Registered successfully. You can login now.');
                closeModal('#registerModal');
                openModal('#loginModal');
            }catch(e){ notify(e.message, true); }
        });
      
  $('#doLogin').addEventListener('click', async ()=>{
            const email = $('#loginEmail').value.trim();
            const password = $('#loginPassword').value;
            if(!email || !password){ notify('Email & Password required', true); return; }
            try{
                const user = await api.login({email, password});
                notify(`Welcome back, ${user.name}!`);
                closeModal('#loginModal');
                await refreshHeader();
                // enable wizard start if service was selected
                const selected = $('.service-item.active');
                if(selected) $('#next-to-selection').disabled = false;
            }catch(e){ notify(e.message, true); }
        });

        $('#logoutBtn').addEventListener('click', async ()=>{
            await api.logout();
            notify('Logged out.');
            await refreshHeader();
            // Reset views to user area
            $$('.nav-tab').forEach(b=>b.classList.remove('active'));
            $('[data-target="userArea"]').classList.add('active');
            $$('.panel').forEach(p => p.classList.remove('active'));
            $('#userArea').classList.add('active');
        });

        // ===== Wizard =====
        let currentService = null;
        let currentStep = 'services';
        const wizardSteps = $$('.wizard-step');
        const wizardPanes = $$('.wizard-pane');
        const serviceItems = $$('.service-item');
        const nextButtons = $$('[id^="next-to-"]');
        const backButtons = $$('[id^="back-to-"]');
        const paymentOptions = $$('.payment-option');
        const ccForm = $('#credit-card-form');

        function initWizard() {
            // Service selection
            serviceItems.forEach(item => {
                item.addEventListener('click', function() {
                    serviceItems.forEach(s => s.classList.remove('active'));
                    this.classList.add('active');
                    $('#next-to-selection').disabled = false; // enable next
                    currentService = this.getAttribute('data-service');
                    updateSelectionPane();
                });
            });
            // Payment selection
            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    paymentOptions.forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    ccForm.style.display = this.getAttribute('data-method') === 'credit-card' ? 'block' : 'none';
                });
            });
            // Next buttons
            nextButtons.forEach(button => {
                button.addEventListener('click', async function() {
                    const target = this.getAttribute('id').replace('next-to-', '');
                    // Require auth before leaving Services
                    const user = await api.me();
                    if(target === 'selection' && !user){
                        openModal('#loginModal');
                        notify('Please login to continue.');
                        return;
                    }
                    navigateToStep(target);
                });
            });
            // Back buttons
       backButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const target = this.getAttribute('id').replace('back-to-', '');
                    navigateToStep(target);
                });
            });
            // Finish booking
            $('#finish-booking').addEventListener('click', function() {
                navigateToStep('services');
                resetWizard();
            });

            // My Bookings quick view
            $('#viewMyBookings').addEventListener('click', ()=> {
                document.getElementById('userArea').scrollIntoView({behavior:'smooth'});
            });
        }

        function navigateToStep(step) {
            currentStep = step;
            wizardSteps.forEach(stepEl => {
                if (stepEl.getAttribute('data-step') === step) stepEl.classList.add('active');
                else stepEl.classList.remove('active');
            });
            wizardPanes.forEach(pane => {
                if (pane.getAttribute('id') === `${step}-pane`) pane.classList.add('active');
                else pane.classList.remove('active');
            });
            if (step === 'confirmation') {
                updateConfirmationSummary();
            }
        }

        function updateSelectionPane() {
            $$('.service-selection').forEach(el => el.style.display = 'none');
            if(currentService) $(`#${currentService}-selection`).style.display = 'block';
            const description = $('#selection-description');
            switch(currentService) {
                case 'hospital': description.textContent = 'Select hospital and department for your appointment'; break;
                case 'store': description.textContent = 'Select store and products you want to order'; break;
                case 'flights': description.textContent = 'Select flight route and passengers'; break;
            }
        }

        async function updateConfirmationSummary() {
            const user = await api.me();
            const customerName = $('#fullname').value || (user?.name ?? 'Guest');
            const amount = (currentService === 'store') ? 80 : (currentService === 'flights') ? 150 : 120;
            const details =
                currentService === 'hospital' ? `${$('#hospital').value || 'Black Lion Hospital'} - ${$('#department').value || 'General Medicine'}` :
                currentService === 'store' ? `${$('#store').value || 'Addis Mercato'} - ${$('#product-category').value || 'Food Items'}` :
                `${$('#from').value || 'ADD'} to ${$('#to').value || 'MQX'}`;

            const ref = randomRef();
            const dateLabel = new Date().toLocaleString();
            $('#refNo').textContent = ref;
            $('#summary-service').textContent =
                currentService === 'hospital' ? 'Hospital Appointment' :
                currentService === 'store' ? 'Store Order' : 'Flight Booking';
            $('#summary-details').textContent = details;
            $('#summary-customer').textContent = customerName;
            $('#summary-datetime').textContent = dateLabel;
            $('#summary-amount').textContent = `$${amount.toFixed(2)}`;

            // Save order
            if(user){
                const order = {
                    id: ref,
                    userId: user.id,
                    userName: user.name,
                    service: currentService,
                    details,
                    amount,
                    createdAt: nowISO()
                };
                await api.saveOrder(order);
                await refreshHeader();
                await refreshMyBookings();
                if(user.role === 'admin') await refreshAdmin();
            }
        }

        function resetWizard() {
            serviceItems.forEach(s => s.classList.remove('active'));
            $('#next-to-selection').disabled = true;
            currentService = null;
            $$('input, select').forEach(field => {
                if (!['next-to-selection'].includes(field.id)) field.value = '';
            });
            paymentOptions.forEach(o => o.classList.remove('selected'));
            ccForm.style.display = 'none';
        }

        // ===== My Bookings (User) =====
        async function refreshMyBookings(){
            const user = await api.me();
            const list = $('#myBookingsList');
            if(!user){ list.innerHTML = '<div class="empty">Login to see your bookings.</div>'; return; }
            const orders = (await api.listOrders()).filter(o => o.userId === user.id).sort((a,b)=> b.createdAt.localeCompare(a.createdAt));
            if(!orders.length){ list.innerHTML = '<div class="empty">No bookings yet.</div>'; return; }
            list.innerHTML = orders.map(o => `
                <div class="summary-item">
                    <span><span class="badge">${o.service}</span> ${o.details}</span>
                    <span><strong>${o.amount}$</strong> &middot; ${new Date(o.createdAt).toLocaleString()}</span>
                </div>
            `).join('');
        }

        // ===== Admin =====
        async function refreshAdmin(){
            const me = await api.me();
            if(!me || me.role !== 'admin') return;
            // Users
            const users = await api.listUsers();
            const utbody = $('#usersTable tbody');
            utbody.innerHTML = users.map(u => `
                <tr>
                    <td>${u.name}</td>
                    <td>${u.email}</td>
                    <td><span class="badge">${u.role}</span></td>
                    <td>${new Date(u.joinedAt).toLocaleDateString()}</td>
                </tr>
            `).join('');
            // Orders
            const orders = await api.listOrders();
            const otbody = $('#ordersTable tbody');
            otbody.innerHTML = orders.sort((a,b)=> b.createdAt.localeCompare(a.createdAt)).map(o => `
                <tr>
                    <td>${o.id}</td>
                    <td>${o.userName}</td>
                    <td>${o.service}</td>
                    <td>${o.details}</td>
                    <td>$${o.amount.toFixed(2)}</td>
                    <td>${new Date(o.createdAt).toLocaleString()}</td>
                </tr>
            `).join('');
        }

        // ===== Footer year =====
        $('#year').textContent = new Date().getFullYear();

        // ===== Init =====
        document.addEventListener('DOMContentLoaded', async () => {
            await refreshHeader();
            initWizard();
            await refreshMyBookings();
            await refreshAdmin();

            // Wizard step click guard (allow back/forward inside wizard only)
            $$('.wizard-step').forEach(ws => {
                ws.addEventListener('click', async () => {
                    const step = ws.getAttribute('data-step');
                    const user = await api.me();
                    if(step !== 'services' && !user){
                        notify('Login required to continue.');
                        openModal('#loginModal');
                        return;
                    }
                    navigateToStep(step);
                });
            });
        });
    </script>
</body>
</html>
